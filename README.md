# Тестовое задание для разработчика ETL

Проект реализует DAG для Apache Airflow, который обрабатывает данные о ценах на автомобили из S3-бакета, 
конвертирует стоимость в рубли по курсу ЦБ РФ и загружает результаты в базу данных GreenPlum/PostgreSQL.

## Обзор проекта

Решение обрабатывает:
- Ежедневные CSV-файлы, загружаемые в S3 (MinIO) по будням (Пн-Сб)
- Конвертацию валюты с использованием курсов ЦБ РФ:
  - Будни (Пн-Пт): используются курсы на дату файла
  - Суббота: используются курсы за предыдущую пятницу
- Загрузку данных в GreenPlum/PostgreSQL
- Идемпотентную обработку инкрементальных обновлений (новые автомобили, удаленные записи, изменения цен)

## Требования

- Docker
- Docker Compose
- Python 3.8+

## Компоненты инфраструктуры

1. MinIO - S3-совместимое хранилище для входных CSV-файлов
2. Apache Airflow - Платформа оркестрации
3. PostgreSQL - Используется как для метаданных Airflow, так и в качестве целевой БД (может быть заменен на GreenPlum)

## Инструкции по установке

1. Клонируйте репозиторий:
   [git clone https://github.com/Sovok/etl-developer-test.git](https://github.com/Sovok00/test_car.git)
   cd test_car
2. Запустите окружение:
   docker compose up -d
3. Настройте подключения в Airflow:
   - MinIO
   - GreenPlum/PostgreSQL
4. Загрузите тестовые данные в MinIO
5. Активируйте DAG в интерфейсе Airflow(Admin/Connections)
